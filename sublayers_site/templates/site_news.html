<div id="RDSiteNews" class="page-wrapper switch-page">
    <div class="window-header buttons-and-headers">Nuke Commander v{{ version }}</div>
    <div class="window-news-content">
        <div class="window-news-content-block first">
            <div class="window-qg-content-header-block">
                <div class=" window-qg-content-back">
                    <div class="window-qg-content-header buttons-and-headers">Новости</div>
                </div>
            </div>
            <div class="window-news-log-list-block">
                <div id="newsHeaderList" class="scroll-block">
                    {% set news_id = 0 %}
                    {% for news in news_list %}
                        <div class="window-news-log-news-header box-shadow" data-news_id="news_content_{{ news_id }}">
                            <div class="window-news-log-news-date">{% raw news['date'] %}</div>
                            <div class="window-news-log-news-header-content">{% raw news['header'] %}</div>
                        </div>


                        <div class="window-news-log-news-header box-shadow" data-news_id="news_content_{{ news_id }}">
                            <div class="window-news-log-news-date">{% raw news['date'] %}</div>
                            <div class="window-news-log-news-header-content">{% raw news['header'] %}</div>
                        </div>
                        <div class="window-news-log-news-header box-shadow" data-news_id="news_content_{{ news_id }}">
                            <div class="window-news-log-news-date">{% raw news['date'] %}</div>
                            <div class="window-news-log-news-header-content">{% raw news['header'] %}</div>
                        </div>
                        <div class="window-news-log-news-header box-shadow" data-news_id="news_content_{{ news_id }}">
                            <div class="window-news-log-news-date">{% raw news['date'] %}</div>
                            <div class="window-news-log-news-header-content">{% raw news['header'] %}</div>
                        </div>
                        <div class="window-news-log-news-header box-shadow" data-news_id="news_content_{{ news_id }}">
                            <div class="window-news-log-news-date">{% raw news['date'] %}</div>
                            <div class="window-news-log-news-header-content">{% raw news['header'] %}</div>
                        </div>
                        <div class="window-news-log-news-header box-shadow" data-news_id="news_content_{{ news_id }}">
                            <div class="window-news-log-news-date">{% raw news['date'] %}</div>
                            <div class="window-news-log-news-header-content">{% raw news['header'] %}</div>
                        </div>


                        {% set news_id = news_id + 1 %}
                    {% end %}
                </div>
                <div class="scroll-btn up" data-block_id="newsHeaderList"></div>
                <div class="scroll-btn down" data-block_id="newsHeaderList"></div>
            </div>
        </div>
        <div class="window-news-content-block second">
            <div class="window-qg-content-header-block">
                <div class=" window-qg-content-back">
                    <div id="RDSiteNewsRightHeader" class="window-qg-content-header buttons-and-headers">Новости</div>
                </div>
            </div>
            {% set news_id = 0 %}
            {% for news in news_list %}
                <div id="news_content_{{ news_id }}" class="window-news-news-content-block">{% raw news['content'] %}</div>
                {% set news_id = news_id + 1 %}
            {% end %}
        </div>
    </div>
</div>

<script>
    $('.window-news-log-news-header').click(function(event) {
        $('.window-news-news-content-block').css('display', 'none');
        $('#' + $(this).data('news_id')).css('display', 'block');
        var header_text = $(this).find('.window-news-log-news-header-content').first().text();

        var procent_length = 10 + 2 * header_text.length;
        procent_length = procent_length > 90 ? 90 : procent_length;

        $('#RDSiteNewsRightHeader').parent().width(procent_length + '%');

        $('#RDSiteNewsRightHeader').text(header_text);
        $('.window-news-log-news-header').removeClass('active');
        $(this).addClass('active');
    });
    $('.window-news-log-news-header').first().click();

    var ns_interval = null;
    var ns_d_scroll = 0;
    var ns_scroll_block = null;
    function makeScroll() {
        var scroll_pos = ns_scroll_block.scrollTop();
        ns_scroll_block.scrollTop(scroll_pos + ns_d_scroll);
    }
    $('#RDSiteNews').find('.scroll-btn').mousedown(function(event) {
        var jq_this = $(this);
        ns_scroll_block = $('#' + jq_this.data('block_id'));
        if (jq_this.hasClass('up')) ns_d_scroll = -10;
        if (jq_this.hasClass('down')) ns_d_scroll = 10;
        ns_interval = setInterval(makeScroll, 50);
    });
    $('#RDSiteNews').find('.scroll-btn').mouseup(function(event) {
        ns_d_scroll = 0;
        clearInterval(ns_interval);
    });
</script>