
# Система итемов #

## Определения ##

Итем - предмет, который может быть размещен в инвентаре. Выброшенный на карту он образует "кучу". 
Выброшенные в одной точке или близко итемы попадают в одну кучу.

Куча - неподвижный гео-объект, имеющий неограниченный инвентарь.

Класс предмета - неабстрактный листовой класс, инстанцирующийся в стеки с ненулевым кол-вом предметов.
Определяет максимальный размер стека предметов данного класса, массу единицы предмета, объём единицы, название, глиф (пиктограмма), описание и т.д.

[todo: теги применимости]

Инвентарь - вместилище предметов (итемов), характеризующееся вместимостью (по слотам, массе, количеству, объему?).
Может быть атрибутом гео-объекта.

Стек предметов - 1 или больше абсолютно одинаковых предметов. Размер стека ограничен максимальным значением, определенным в классе его предметов.

Слот - место в инвентаре под стек предметов. В инвентарь может поместиться столько стеков, сколько доступно слотов, но не больше.

Фактически стек и предмет - это одна и та же сущнность. Кол-во единиц предмета в стеке - это атрибут самого предмета.
В дальнейшем под словом предмет (итем) будет подразумеваться в том числе и стек, когда атрибут count у предмета > 1.

Два предмета (стека) являются одинаковыми, если их атрибуты (кроме count) и классы идентичны.

Два одинаковых предмета (стека) могут сливаться в один, если не будет превышен максимальный размер стека, или перегруппировываться так,
что один стек окажется заполненным, а во втором будет остаток.

Класс предмета описывает можно ли применять его и к кому (к себе, к союзнику, к врагу), а также условия, необходимые для его применения.
Технически при применении вызывается соответствующая функция.

Предмет или несколько одинаковых предметов (часть стека или полностью весь) можно применить к себе, к другому юниту или к точке на карте в доступном радиусе, который указан в атрибуте предмета.


## Учет ##

Конструктор предметов инкрементирует глобальный счетчик таких предметов в пределах кластера.


## Классы ##

- Item - базовый абстрактный [A]
    - Quest - задание, данное игроку другим игроком или NPC. Включает в себя формулировку, алгоритм проверки на выполнение и описание награды
    - Vehicle - законсервированное транспортное средство в запакованном виде. Характерзуется большой массой и не стекается (max_stack_size = 1)
    - FuelCan - канистра с топливом. Одна единица = 10л [?] - минимальный объём, который можно выделить как предмет
    - FuelTank - бочка с топливом включает в себя по объёму 10 [?] канистр
    - Food [A] - еда [todo: детализировать]
    - Tools [A] - инструменты [todo: детализировать]
    - Equipment [A] - экипировка автомобиля: оружие и улучшалки: ходовая, двигатель и тд. [todo: детализировать]
	- [todo: дополнить]

    