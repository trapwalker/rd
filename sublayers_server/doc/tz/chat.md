
# Chat # (menkent)

Класс AbstractChat [A] содержит: 
	-- id

Наследники: 
	-- PublicChat ([todo: уточнить] общий чат, чат города, пока не понятно что здесь будет)
		-- history (30-50 сообщений)
	-- Chat
		-- имя чата (наверное необязательно)
		-- список участников
		-- Группа (ссылка на группу, если это групповой чат, может быть null)

Инициализация чата: 
	-- PublicChat
		-- Инициализируется автоматически (подъех к городу, он включился, и тд)
	-- Chat
		-- Инициируется атвоматически при следующих событиях
			-- Создание группы
			-- Создание клана [пост релиз]
		-- Инициируется Агентом, когда от него  поступает соответствующий API-запрос: 
			-- @privateChat <имя пользователя>
			-- кликнуть по не своей машинке и выбрать соответствующий пункт меню

Добавление участников: 
	-- PublicChat
		-- Автоматически все видят
	-- Chat
		-- Если Группа, то Автоматически при включении нового члена в группу
		-- Если приватный чат (Группа == null), то добавляются инициатор @privateChat и имя пользователя

Конструктор Chat:
	-- Chat(agent1, agent2) (это приватный чат)
	-- Chat(group) (это групповой чат)
	
Исключения участников из чата: 
	-- PublicChat
		-- Автоматически, если agent offline или выехал за пределы радиосвязи города (обсудить)
	-- Chat
		-- Если Группа==null, то при выходе в offline агента
		-- Если Группа, то при исключении agent из группы

Деструктор чата: 
	-- PublicChat
		-- Никогда
	-- Chat
		-- При длинне списка участников равной 0
		
История чата: 
	-- PublicChat
		-- Необходимо хранить в каждом чате по 30-50 сообщений
	-- Chat 
		-- Нет истории. Может вызвать больше проблем в плане общения людей. 
		
Итог: 
	-- Каждый Агент имеет список своих чатов
	-- Каждый Chat (не публичный) имеет список агентов-участников
	-- Каждая группа, при создании, создаёт свой Chat с одним участником (создателем группы)
	
	
	
	
	
	

# Chat # (abbir)

Класс AbstractChat [A] содержит: 
	-- id
	-- history (30-50 сообщений)		
	-- список участников
	
Наследники: 
	-- PublicChat ([todo: уточнить] общий чат, чат города, чат бара, чат рынка, чат группы и т.д.)
		-- ссылка на инициирующий объект (город, группа и т.д.);				
	-- PrivateChat (подмножество чатов которые создают сами игроки)
	
Инициализация чата: 
	-- PublicChat
		-- Инициализируется автоматически (при создании соответствующих объектов город, группа и т.д.)
	-- PrivateChat		
		-- Инициируется любым игроком, когда от него поступает соответствующий API-запрос: 
			-- @privateChat <имя пользователя>;
			-- Кликнуть по не своей машинке и выбрать соответствующий пункт меню;

Добавление участников: 
	-- PublicChat
		-- Игрок добавляется в этот чат автоматически, при выполнении соответствующего условия (заехал в область видимости города, зашел на рынок / в бар, вступил в группу и т.д.);
	-- PrivateChat
		-- При создании чата;
		-- По приглашению от любого игрока который уже находится в чате;		
		
Конструктор: [обсудить]
		
Исключения участников из чата: 
	-- PublicChat
		-- Автоматически, если agent offline или при выполнении соответствующего условия (обратное по отношению к условию вступления в чат);
	-- PrivateChat
		-- Автоматически, если agent offline;
		-- По собственному желанию (соответствующий API-запрос); 

Деструктор чата: 
	-- PublicChat
		-- При удалении инициирующего объекта;
	-- PrivateChat
		-- При длинне списка участников равной 0;
		
История чата: [обсудить]
	-- PublicChat, PrivateChat:
		-- Необходимо хранить в каждом чате по 30-50 сообщений	
		
Итог: 
	-- Каждый Агент имеет список своих чатов;
	-- Каждый Chat имеет список агентов-участников;
	-- Отдельные сущности в игре имеют свои PublicChat (время жизни которых (чатов) совпадает со временем жизни сущности);
	-- Каждый Агент попадает в PublicChat автоматически и выйти из него может тоже только автоматически;
	-- Каждый Агент имеет право создать PrivateChat (первый создающий чат Агент становится его единственным участником);
	-- Каждый Агент находящийся в PrivateChat имеет право выдать приглашение любому другому игроку (по имени Игрока или "по машинке" (клик на машинку на карте));
	-- Каждый Агент может как принять приглашение в PrivateChat так и отклонить его;
	-- Каждый Агент находящийся в PrivateChat имеет возможность покинуть его (при выходе последнего Агента PrivateChat удаляется); 