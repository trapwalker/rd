
# Крафт #

Крафт -- это процесс преобразования набора итемов, денег (топлива) и времени в другой набор итемов и топлива по рецепту.
Данная операция является единственной формой транзакции по преобразованию предметов в игре.

Рецепт -- описание начального и кончного набора компонентов, а также правил и требований для преобразования.
[todo: детализировать]

Формула крафта -- своеобразный идентификатор рецепта, определяемый, например, конфигурацией расположения ингридиентов на доске.

Крафт выполняется самостоятельно или посторонним агентом (другой игрок, либо NPC) при наличии соответствующих способностей.

Агент вправе устанавливать цену своей работы.

На низком уровне функция крафта принимает в качестве параметров:
    - Агента -- того, кто будет осуществлять крафт. Его способности будут влиять на результат и вероятность его успешного получения
    - Входной набор компонентов -- исходные предметы
    - Рецепт

На выходе получим:
    - признак успеха/провала
    - время, затрачиваемое на конкретно эту операцию
    - выходной набор предметов

Для игрока крафт будет доступен в явном и неявном виде.

В явном виде -- это личный крафт:
    - игрок открывает интерфейс крафта
    - кладёт на верстак исходные предметы (ингридиенты)
    - размещает их в соответствии с формулой
    - инициирует процесс

В результате исходные предметы преобразуются в другой набор с некоторой вероятностью, зависящей от способностей игрока.
[todo: обсудить кратный крафт]

Крафт посредством услуг другого игрока или NPC выглядит как торговля:
    - игрок (заказчик) берёт с лотка предложения мастера виртуальный (ещё не скрафченный) предмет, олицетворяющий рецепт
    - мастер берёт с лотка предложения игрока необходиме ингридиенты плюс награду за работу и ставит свою подпись [флаг согласия]
    - игрок торгуется убирая/добавляя предметы и ставит свою подпись.
    - если кто-то поменяет содержимое лотков, подпись оппонента снмается. Нужно сделать откат и историю изменения лотков.
    - при наличии обеих подписей происходит крафт и обмен.

