# Торговля #

В игре предполагается наличие следующих видов торговли:
-- глобальный рынок для торговли между игроками и торговли с Городами (доступен в городе);
-- обмен между игроками (доступен на глобальной карте);

## Глобальный рынок.

Глобальный рынок -- сущность (одна на игру), доступная в каждом городе, представляющую собой список торговых лотов (подобие доски с объявлениями о продаже итемов). 

Торговый лот -- сущность-контейнер, состоит из (у каждого Игрока есть список его Торговых лотов, те лоты в которых он указан как хозяин):
-- ID лота;
-- информация о хозяине;
-- итем итемов выставленный на продажу;
-- цена лота;
-- город в котором находится лот;
-- информация о состоянии лота (в продаже / снят / куплен(высвечивается только у купившего))

При создании торгового лота, итем переходит из инвентаря игрока в сущность Торговый лот, который в свою очередь попадает на Глобальный рынок. Хозяин лота может поменять цену лота или снять его с продажи. 

Взаимодействие с Глобальным Рынком: 
-- заехать в город
-- обратиться к Глобальному рынку (окно Глобальный рынок):
	-- вкладка выставления предметов (создание лота), включающее в себя:
			-- инвентарь игрока;
			-- лоты на продажу с возможностью выставить цену для каждого;
-- отображение средней цены по этому городу на такие же Лоты (если в городе нет таких лотов, то средняя цена из других городов с “пометкой”)
-- вкладка своих лотов (имеющие флаг “в продаже”):
	-- механизм редактирования лотов (менять цену);
	-- механизм снятия лота с продажи;
-- вкладка забирания лотов (купленных или снятых):
	-- что-то вроде инвентаря, с кнопкой “Take All”, а при нажатии на отдельный предмет он помещается в свой инвентарь;

После подтверждения выставления лотов выставленные итемы изымаются у игрока и заворачиваются в Торговые лоты. 

Действия над Торговыми лотами:
-- Покупка. Когда осуществляется покупка на глобальном рынке, со счета покупателя списывается сумма равная цене лота и зачисляется на счет продавца (не забывая при этом украсть 10-15% налога на сделку), лот меняет информацию о хозяине и информацию о состоянии лота (куплен);
-- Снятие лота. Продавец может в любой момент снять лот с торгов, лот меняет информацию о состоянии лота (снят);
-- Выставление Лота (Создание Лота). От продавца требуется выбрать предмет и ввести цену предмета. Остальные данные о лоте заполняются автоматически: id, хозяин, город, флаг.


## Обмен ##
Обмен -- процедура непосредственного обмена итемов и денег в живом мире.